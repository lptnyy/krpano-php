var gui_window_state={};(function(){function p(){i||(i={}),s==="maximized"?i.mode="maximized":i.mode="normal",s==="normal"&&(i.x=r.x,i.y=r.y,i.width=r.width,i.height=r.height)}function d(){var e=Math.min(screen.width,screen.availWidth),t=Math.min(screen.height,screen.availHeight),n=i?i.mode:"normal",s=i?i.width|0:0,o=i?i.height|0:0,u=i?i.x:undefined,a=i?i.y:undefined;f&&(l=s,c=o);if(n=="normal")if(u<=0||a<=0){u=a=-1;if(s>=e||o>=t)s=o=0}s<=100&&(s=e*.6>>3<<3,s<900&&(s=900),s=900),o<=100&&(o=t*.9>>3<<3,760<t-40&&(o=760));if(u===undefined||u<0||u>=e)u=e/2-s/2|0;if(a===undefined||a<0||a>=t)a=t/2-o/2|0;u<0&&(u=0),a<0&&(a=0),u+s>=e&&(u+=Math.min(e-(u+s),0)),a+o>=t&&(a+=Math.min(t-(a+o),0)),u+s>=e&&(s=e-u),a+o>=t&&(o=t-a),u>=e&&(u=e/2-s/2|0),a>=t&&(a=t/2-o/2|0),h={t:performance.now(),w:s,h:o},r.resizeTo(s,o),r.moveTo(u,a)}function v(){a=!0,s="maximized"}function m(){s="normal"}function g(){s="minimized"}function y(){s="normal"}function b(){clearTimeout(u),u=setTimeout(p,500)}var e=gui_window_state,t="windowState119",n=require("nw.gui"),r=n.Window.get(),i=null,s="normal",o=null,u=null,a=!1,f=!1,l=0,c=0;e.lastsize=null,e.currentsize=null;var h=null;e.load=function(){var e=require("os"),n=(e.platform()+e.type()+process.platform).toLowerCase(),o=n.indexOf("darwin")>=0||n.indexOf("mac")>=0;i=JSON.parse(localStorage[t+(convertdroplet_mode?"convertdroplet":"")]||"null"),i?(s=i.mode,s==="maximized"&&o==0?r.maximize():d()):(s="normal",d(),p())},e.set_droplet_mode=function(e,t){f=!0,l=e,c=t,r.resizeTo(e,t)},e.show=function(){r.show()},e.save=function(){localStorage&&(localStorage[t+(convertdroplet_mode?"convertdroplet":"")]=JSON.stringify(i))},r.on("move",b),r.on("maximize",v),r.on("unmaximize",m),r.on("minimize",g),r.on("restore",y),r.window.addEventListener("resize",function(){if(f)return;e.lastsize=e.currentsize,e.currentsize={w:r.width,h:r.height};if(h){var t=performance.now()-h.t;if(t<3e3){var n=h.w,i=h.h,u=r.width,l=r.height;if(n!=u||i!=l){var c=n,d=i;r.resizeTo(c,d)}h=null;return}h=null}clearTimeout(o),o=setTimeout(function(){a?a=!1:s==="maximized"&&(s="normal"),p()},500)},!1),gui_get_global().shutdownEvents.push(function(){r.removeListener("move",b),r.removeListener("maximize",v),r.removeListener("unmaximize",m),r.removeListener("minimize",g),r.removeListener("restore",y)})})()